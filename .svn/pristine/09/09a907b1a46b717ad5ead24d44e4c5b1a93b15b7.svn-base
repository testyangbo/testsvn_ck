# 采购入库单功能测试用例

## 1. 正常流程

### 1.1 结算流程
- 操作步骤：
  1. 选择供应商
  2. 添加商品条目
  3. 输入数量、单价
  4. 点击【结算】按钮
- 断言点：
  - 结算成功提示显示
  - 总金额计算正确
  - 库存数量增加

### 1.2 红冲流程
- 操作步骤：
  1. 选择已结算单据
  2. 点击【红冲】按钮
  3. 确认红冲
- 断言点：
  - 红冲成功提示显示
  - 单据状态变为"已红冲"
  - 库存数量恢复

### 1.3 修改流程
- 操作步骤：
  1. 选择待修改单据
  2. 修改商品数量/单价
  3. 点击【保存】按钮
- 断言点：
  - 修改成功提示显示
  - 金额重新计算正确
  - 库存数量同步更新

## 2. 异常场景

### 2.1 结算失败
- 测试场景：
  - 库存不足
  - 单价为0或负数
  - 必填字段为空
- 断言点：
  - 结算失败提示显示
  - 具体错误信息正确
  - 单据状态未改变

### 2.2 金额计算错误
- 测试场景：
  - 数量*单价≠金额
  - 含税/不含税计算错误
  - 折扣计算错误
- 断言点：
  - 系统拒绝提交
  - 显示计算错误提示
  - 高亮错误字段

## 3. 数据验证
- 单据编号连续性
- 操作日志记录
- 权限控制验证